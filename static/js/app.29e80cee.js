(function(t){function e(e){for(var r,i,o=e[0],c=e[1],d=e[2],l=0,h=[];l<o.length;l++)i=o[l],n[i]&&h.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],r=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var r={},n={app:0},a=[];function i(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=r,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1281:function(t,e,s){"use strict";var r=s("701d"),n=s.n(r);n.a},"56d7":function(t,e,s){"use strict";s.r(e);var r=s("f213"),n=s("5f5b"),a=s("8c4f"),i=s("2f62"),o=s("2b0e"),c=(s("f9e3"),s("2dd8"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main"}},[s("b-container",[s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"fadeIn second",attrs:{type:"text",id:"login",name:"login",placeholder:"login"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"fadeIn third",attrs:{type:"text",id:"password",name:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("input",{staticClass:"fadeIn fourth",attrs:{type:"button",value:"Log In"},on:{click:function(e){return t.submit()}}})]),s("div",{attrs:{id:"formFooter"}},[s("a",{staticClass:"underlineHover",attrs:{href:"#"}},[t._v("Forgot Password?")])])])])])],1)}),d=[],u={data:()=>({login:null,password:null}),methods:{submit(){this.login&&this.password?this.$api.post("/login",{login:this.login,password:this.password}).then(t=>{t.data.error?this.$snotify.error(t.data.error):(this.$store.commit("set_user",{name:t.data.fio,role:t.data.role,control:t.data.control}),this.$router.push({path:"/account"}))}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)}):this.$snotify.warning("Введите логин и пароль!")}}},l=u,h=(s("1281"),s("2877")),m=Object(h["a"])(l,c,d,!1,null,"2db86658",null),f=m.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",[s("b-row",[s("b-col",[t._v("Username:")]),s("b-col",[t._v(t._s(this.username))]),s("b-col",[t._v(t._s(this.role[this.user_role]))])],1),1===this.user_role?s("div",[s("teacher_template")],1):s("div",[s("student_template")],1)],1)],1)},_=[],p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[0===this.$store.state.user_control?s("div",[s("b-row",[s("b-col",{attrs:{sm:"4"}},[s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("Upload")])]),s("div",{staticClass:"custom-file"},[s("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"inputGroupFile01"}}),s("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v("Choose file")])])])])],1),t.student_date?s("div",[s("b-row",[t._v("Ваш нормоконтроль:")]),s("b-row",[t._v(t._s(t.student_date.teacher))]),s("b-row",[s("b-col",[t._v("\n                    "+t._s(t.student_date.date.getDay()+"."+t.student_date.date.getMonth()+"."+t.student_date.date.getFullYear())+"\n                ")]),s("b-col",[t._v("\n                    "+t._s(t.student_date.begin.getHours())+":"+t._s(t.student_date.begin.getMinutes())+"-"+t._s(t.student_date.end.getHours())+":"+t._s(t.student_date.end.getMinutes())+"\n                ")])],1),s("b-row",[s("b-button",{staticClass:"btn-sm",on:{click:function(e){return t.remove()}}},[t._v("Delete (test)")])],1)],1):s("div",{ref:"student_table_show"},[s("b-col",{attrs:{sm:"6"}},[s("b-row",[t._v("Свободное время преподавателей")]),s("b-row",[s("b-table",{ref:"dates_table_student",attrs:{striped:"",hover:"",items:t.free_dates,fields:t.fields},scopedSlots:t._u([{key:"cell(teacher)",fn:function(e){return[t._v("\n                            "+t._s(e.item.teacher)+"\n                        ")]}},{key:"cell(date)",fn:function(e){return[t._v("\n                            "+t._s(e.item.date.getDay()+"."+e.item.date.getMonth()+"."+e.item.date.getFullYear())+"\n                        ")]}},{key:"cell(begin)",fn:function(e){return[t._v("\n                            "+t._s(e.item.begin.getHours())+":"+t._s(e.item.begin.getMinutes())+"\n                        ")]}},{key:"cell(end)",fn:function(e){return[t._v("\n                            "+t._s(e.item.end.getHours())+":"+t._s(e.item.end.getMinutes())+"\n                        ")]}},{key:"cell(confirm)",fn:function(e){return[s("b-button",{staticClass:"btn-sm",on:{click:function(s){return t.add(e.item)}}},[t._v("+")])]}}],null,!1,2314661524)})],1)],1)],1),s("b-row",[s("b-table",{ref:"errors_table",attrs:{striped:"",hover:"",items:t.student_history,fields:t.fields2}})],1)],1):s("div",[s("b-row",[t._v("Passed")])],1)])},g=[],v=s("ea76"),y=s.n(v),$={name:"Account_student",components:{DatePicker:y.a},data:()=>({fields:[{key:"teacher",label:"Преподаватель",sortable:!0},{key:"date",label:"День",sortable:!0},{key:"begin",label:"Начало",sortable:!0},{key:"end",label:"Конец",sortable:!0},{key:"confirm",label:"",sortable:!1}],free_dates:[],student_date:null,fields2:[{key:"error",label:"Ошибка",variant:"danger"},{key:"comment",label:"Комментарий"}],student_history:[]}),methods:{remove(){this.$api.post("/time/student",{date:{date:this.student_date.date.getTime(),begin:this.student_date.begin.getTime(),end:this.student_date.end.getTime()},teacher:this.student_date.teacher,student:this.$store.state.username,action:"delete"}).then(t=>{"success"===t.data.result?(this.$snotify.success("success"),this.student_date=null):this.$snotify.error("error")}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)}),this.$api.get("/time/free").then(t=>{t.data.error||(t.data.forEach(function(t){dates.push({date:new Date(t.date),begin:new Date(t.begin),end:new Date(t.end),teacher:t.teacher})}),this.free_dates=dates)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},add(t){this.$api.post("/time/student",{date:{date:t.date.getTime(),begin:t.begin.getTime(),end:t.end.getTime()},teacher:t.teacher,student:this.$store.state.username,action:"create"}).then(e=>{"success"===e.data.result?(this.$snotify.success("success"),this.student_date={date:t.date,begin:t.begin,end:t.end,teacher:t.teacher}):this.$snotify.error("error")}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},get_history(){this.$api.get("/check?student="+this.$store.state.username).then(t=>{t.data?this.student_history=t.data:this.$snotify.info("Не забудьте сделать запись!")}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})}},beforeCreate(){if(this.$store.state.username&&0===this.$store.state.user_control){let t=[],e=!1;this.$api.get("/time/student?student="+this.$store.state.username).then(t=>{"success"===t.data.result?(this.student_date={date:new Date(t.data.date.date),begin:new Date(t.data.date.begin),end:new Date(t.data.date.end),teacher:t.data.date.teacher},e=!0):this.$snotify.info("Не забудьте сделать запись!")}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)}),e||this.$api.get("/time/free").then(e=>{e.data.error||(e.data.forEach(function(e){t.push({date:new Date(e.date),begin:new Date(e.begin),end:new Date(e.end),teacher:e.teacher})}),this.free_dates=t)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})}},created(){0===this.$store.state.user_control&&this.get_history()}},k=$,w=Object(h["a"])(k,p,g,!1,null,"43b5f394",null),x=w.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",[s("b-col",[t._v("Teacher")])],1),s("b-row",[s("b-col",{attrs:{sm:"7"}},[s("date-picker",{attrs:{format:"YYYY-MM-DD",lang:"en",confirm:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("date-picker",{attrs:{lang:"en",type:"time",format:"HH:mm","minute-step":10,placeholder:"Start","time-picker-options":{start:"08:10",step:"00:20",end:"19:30"},confirm:""},model:{value:t.begin_time,callback:function(e){t.begin_time=e},expression:"begin_time"}}),s("date-picker",{attrs:{lang:"en",type:"time",format:"HH:mm","minute-step":10,placeholder:"End","time-picker-options":{start:this.begin_time.getHours()+":"+(this.begin_time.getMinutes()+20),step:"00:20",end:"19:30"},confirm:""},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),s("b-col",[s("b-button",{staticClass:"btn-md",attrs:{variant:"primary"},on:{click:function(e){return t.add()}}},[t._v("Add date")])],1)],1),s("b-row",[s("b-col",{attrs:{sm:"5"}},[s("b-row",[t._v("Ваше свободное время")]),s("b-row",[s("b-table",{ref:"dates_table_teacher",attrs:{striped:"",hover:"",items:t.dates,fields:t.fields},scopedSlots:t._u([{key:"cell(date)",fn:function(e){return[t._v("\n                        "+t._s(e.item.date.getDay()+"."+e.item.date.getMonth()+"."+e.item.date.getFullYear())+"\n                    ")]}},{key:"cell(begin)",fn:function(e){return[t._v("\n                        "+t._s(e.item.begin.getHours())+":"+t._s(e.item.begin.getMinutes())+"\n                    ")]}},{key:"cell(end)",fn:function(e){return[t._v("\n                        "+t._s(e.item.end.getHours())+":"+t._s(e.item.end.getMinutes())+"\n                    ")]}},{key:"cell(del)",fn:function(e){return[s("b-button",{staticClass:"btn-sm",on:{click:function(s){return t.remove(e)}}},[t._v("X")])]}}])})],1)],1),s("b-col",{attrs:{sm:"1"}}),s("b-col",{attrs:{sm:"6"}},[s("b-row",[t._v("Расписание")]),s("b-row",[s("b-table",{ref:"dates_table_teacher",attrs:{striped:"",hover:"",items:t.check_dates,fields:t.fields2},scopedSlots:t._u([{key:"cell(date)",fn:function(e){return[t._v("\n                        "+t._s(e.item.date.getDay()+"."+e.item.date.getMonth()+"."+e.item.date.getFullYear())+"\n                    ")]}},{key:"cell(begin)",fn:function(e){return[t._v("\n                        "+t._s(e.item.begin.getHours())+":"+t._s(e.item.begin.getMinutes())+"\n                    ")]}},{key:"cell(end)",fn:function(e){return[t._v("\n                        "+t._s(e.item.end.getHours())+":"+t._s(e.item.end.getMinutes())+"\n                    ")]}},{key:"cell(student)",fn:function(e){return[t._v("\n                        "+t._s(e.item.student)+"\n                    ")]}},{key:"cell(check)",fn:function(e){return[s("b-button",{staticClass:"btn-sm",on:{click:function(s){return t.go_check(e)}}},[t._v("Проверка")])]}}])})],1)],1)],1)],1)},D=[],C={name:"Account_teacher",components:{DatePicker:y.a},data:()=>({fields:[{key:"date",label:"День",sortable:!0},{key:"begin",label:"Начало",sortable:!0},{key:"end",label:"Конец",sortable:!0},{key:"del",label:"",sortable:!1}],fields2:[{key:"date",label:"День",sortable:!0},{key:"begin",label:"Начало",sortable:!0},{key:"end",label:"Конец",sortable:!0},{key:"student",label:"Студент",sortable:!1},{key:"check",label:"",sortable:!1}],date:null,begin_time:new Date,end_time:new Date,dates:[],check_dates:[]}),methods:{add(){if(this.begin_time<this.end_time){let t={date:this.date,begin:this.begin_time,end:this.end_time};this.$api.post("/time/teacher",{date:{date:this.date.getTime(),begin:this.begin_time.getTime(),end:this.end_time.getTime()},teacher:this.$store.state.username,action:"create"}).then(e=>{"success"===e.data.result?(this.dates.push(t),this.$snotify.success(e.data.result)):this.$snotify.error(e.data.error)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})}else this.$snotify.warning("Время окончения должно быть больше времени начала")},remove(t){this.$api.post("/time/teacher",{date:{date:t.item.date.getTime(),begin:t.item.begin.getTime(),end:t.item.end.getTime()},teacher:this.$store.state.username,action:"delete"}).then(e=>{e.data.result?(this.dates=this.dates.filter(function(e){return e!==t.item}),this.$refs.dates_table_teacher.refresh()):this.$snotify.error(e.data.error)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},go_check(t){this.$router.push({path:"/work/"+t.item.student})}},created:function(){let t=[],e=[];this.$api.get("/time/teacher?teacher="+this.$store.state.username).then(s=>{s.data.dates.forEach(function(s){s.student?e.push({date:new Date(s.date),begin:new Date(s.begin),end:new Date(s.end),student:s.student}):t.push({date:new Date(s.date),begin:new Date(s.begin),end:new Date(s.end)})})}),this.check_dates=e,this.dates=t}},M=C,O=Object(h["a"])(M,E,D,!1,null,"0dbdf562",null),P=O.exports,j={components:{student_template:x,teacher_template:P},data:()=>({role:["student","teacher"]}),computed:Object(i["b"])(["username","user_role"]),beforeCreate(){this.$store.state.username||this.$router.push("/")}},H=j,T=Object(h["a"])(H,b,_,!1,null,"b8a9d3dc",null),S=T.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",[s("b-row",[t._v(t._s(t.student_fio))]),s("b-table",{ref:"errors_table",attrs:{striped:"",hover:"",items:t.student_history,fields:t.fields},scopedSlots:t._u([{key:"cell(del)",fn:function(e){return[s("b-button",{staticClass:"btn-sm",attrs:{variant:"success"},on:{click:function(s){return t.remove_item(e)}}},[t._v("Ошибка исправлена")])]}}])}),s("b-row",[s("b-col",[s("b-row",[s("b-form-select",{attrs:{options:t.options},model:{value:t.error_text,callback:function(e){t.error_text=e},expression:"error_text"}}),s("b-form-input",{attrs:{placeholder:"Ошибка"},model:{value:t.error_text,callback:function(e){t.error_text=e},expression:"error_text"}})],1)],1),s("b-col",[s("b-form-input",{attrs:{placeholder:"Комментарий"},model:{value:t.comment_text,callback:function(e){t.comment_text=e},expression:"comment_text"}})],1),s("b-col",[s("b-button",{staticClass:"btn-sm",on:{click:function(e){return t.add_item(t.item)}}},[t._v("Добавить ошибку")])],1)],1),s("b-row",{staticClass:"mt-3"},[s("b-col",[s("b-button",{staticClass:"btn-lg",on:{click:function(e){return t.end_check()}}},[t._v("Отправить на повторный")])],1),s("b-col",[s("b-button",{staticClass:"btn-lg",attrs:{variant:"success"},on:{click:function(e){return t.passed_control()}}},[t._v("Успешно прошел нормоконтроль\n                ")])],1)],1)],1)],1)},Y=[],I={name:"Check_page",data:()=>({fields:[{key:"error",label:"Ошибка",variant:"danger"},{key:"comment",label:"Комментарий"},{key:"del",label:""}],options:["error one","error 2","error 3"],student_history:[],student_fio:null,error_text:"",comment_text:"",item:null}),methods:{get_history(){this.$api.get("/check?student="+this.student_fio).then(t=>{t.data?this.student_history=t.data:this.$snotify.info("Не забудьте сделать запись!")}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},remove_item(t){this.$api.post("/check",{action:"remove",student:this.student_fio,data:{error:t.item.error}}).then(e=>{"true"===e.data.success?(this.student_history=this.student_history.filter(function(e){return e!==t.item}),this.$refs.errors_table.refresh()):this.$snotify.error(e.data.error)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},add_item(){this.error_text&&this.$api.post("/check",{action:"add",student:this.student_fio,data:{error:this.error_text,comment:this.comment_text}}).then(t=>{"true"===t.data.success?(this.student_history.push({error:this.error_text,comment:this.comment_text}),this.$refs.errors_table.refresh(),this.error_text="",this.comment_text=""):this.$snotify.error(t.data.error)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},end_check(){this.$api.post("/time/teacher",{teacher:this.$store.state.username,student:this.student_fio,action:"end"}).then(t=>{t.data.result?this.$router.push("/account"):this.$snotify.error(t.data.error)}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)})},passed_control(){0===this.student_history.length?this.$api.post("/student/passed",{student:this.student_fio}).then(t=>{this.end_check()}).catch(t=>{this.$snotify.error(`Error status ${t.response.status}`)}):this.$snotify.warning("В работе еще есть ошибки!")}},created:function(){this.student_fio=this.$route.params.student_fio,this.get_history()}},N=I,A=Object(h["a"])(N,F,Y,!1,null,"5db26e26",null),U=A.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",[s("b-row",[t._v(t._s(t.student_fio))])],1)],1)},J=[],L={name:"History_page",data:()=>({item:null}),methods:{},created:function(){this.student_fio=this.$route.params.student_fio}},B=L,R=Object(h["a"])(B,G,J,!1,null,"8acc45a0",null),X=R.exports;const q=[{path:"/",component:f,name:"indexPage",meta:{}},{path:"/account",component:S,name:"accountPage",meta:{}},{path:"/work/:student_fio",component:U,name:"checkPage",meta:{}},{path:"/history",component:X,name:"historyPage",meta:{}}];var z=q,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Navigation"),s("router-view"),s("vue-snotify")],1)},Q=[],V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[s("b-navbar-brand",{attrs:{href:"#"}},[t._v("HSE Exams")]),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),""!==this.$store.state.username?s("div",[s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",[s("b-nav-item",{attrs:{to:{name:"indexPage"}}},[t._v("Home")])],1),s("b-navbar-nav",[s("b-nav-item",{attrs:{to:{name:"indexPage"}}},[t._v("Exit")])],1)],1)],1):t._e()],1)],1)},W=[],Z={name:"Navigation"},tt=Z,et=Object(h["a"])(tt,V,W,!1,null,"216b9c49",null),st=et.exports,rt={components:{Navigation:st}},nt=rt,at=(s("5c0b"),Object(h["a"])(nt,K,Q,!1,null,null,null)),it=at.exports;const ot=s("bc3a");var ct=ot.create({baseURL:"/api/v1"});o["default"].use(n["a"]),o["default"].use(a["a"]),o["default"].use(i["a"]),o["default"].use(r["b"],{toast:{position:r["a"].rightTop,timeout:3e3}}),o["default"].prototype.$api=ct;const dt=new i["a"].Store({state:{username:"",user_role:0},mutations:{set_user(t,e){t.username=e.name,t.user_role=e.role,t.user_control=e.control}}}),ut=new a["a"]({routes:z,mode:"history",scrollBehavior:()=>({y:0})});new o["default"]({el:"#app",router:ut,store:dt,render:t=>t(it)})},"5c0b":function(t,e,s){"use strict";var r=s("5e27"),n=s.n(r);n.a},"5e27":function(t,e,s){},"701d":function(t,e,s){}});